import{j as e,ah as Ie,ai as ye,u as Be,r as h,aj as xe,ak as E,al as Re,am as ue,an as he,ao as ge,ap as O,e as Ke,m as Ve,aq as ze,ae as X,ar as we,as as Ge,af as Oe,at as qe}from"./index-DDNo2eib.js";import{F as Ue}from"./FavoriteButton-B-Q1ES4E.js";import{R as Z,y as Q}from"./CategoricalChart-hXbiXesu.js";import{L as be}from"./LineChart-BB3Oq4Rb.js";import{a as ee}from"./CartesianChart-Dem3ObQ4.js";import{X as se,Y as te}from"./YAxis-DrMsz6yN.js";import{L as pe}from"./Line-Da09CDmP.js";import{B as We}from"./BarChart-BEoNFeNW.js";import{B as He}from"./barSelectors-DZSNoaQl.js";import"./clsx-B-dksMZM.js";import"./index-CnyDuYXe.js";import"./ActivePoints-Bpg2J6nY.js";import"./ErrorBar-CIgmiTzH.js";import"./tooltipContext-Cv8VJAKy.js";const Je=[["'","1","2","3","4","5","6","7","8","9","0","-","=","Backspace"],["Tab","q","w","e","r","t","y","u","i","o","p","´","[","]"],["CapsLock","a","s","d","f","g","h","j","k","l","ç","~","Enter"],["Shift","\\","z","x","c","v","b","n","m",",",".",";","Shift"],["Ctrl","Fn","Win","Alt"," ","AltGr","Menu","Ctrl"]],L={"'":"left-pinky",1:"left-pinky",2:"left-ring",3:"left-middle",4:"left-index",5:"left-index",6:"right-index",7:"right-index",8:"right-middle",9:"right-ring",0:"right-pinky","-":"right-pinky","=":"right-pinky",q:"left-pinky",w:"left-ring",e:"left-middle",r:"left-index",t:"left-index",y:"right-index",u:"right-index",i:"right-middle",o:"right-ring",p:"right-pinky","´":"right-pinky","[":"right-pinky","]":"right-pinky",a:"left-pinky",s:"left-ring",d:"left-middle",f:"left-index",g:"left-index",h:"right-index",j:"right-index",k:"right-middle",l:"right-ring",ç:"right-pinky","~":"right-pinky","\\":"left-pinky",z:"left-pinky",x:"left-ring",c:"left-middle",v:"left-index",b:"left-index",n:"right-index",m:"right-index",",":"right-middle",".":"right-ring",";":"right-pinky",Backspace:"right-pinky",Tab:"left-pinky",CapsLock:"left-pinky",Enter:"right-pinky",Shift:"left-pinky"," ":"thumbs"},fe={"left-pinky":"bg-pink-200 border-pink-400 text-pink-900","left-ring":"bg-purple-200 border-purple-400 text-purple-900","left-middle":"bg-blue-200 border-blue-400 text-blue-900","left-index":"bg-green-200 border-green-400 text-green-900",thumbs:"bg-gray-200 border-gray-400 text-gray-900","right-index":"bg-green-200 border-green-400 text-green-900","right-middle":"bg-blue-200 border-blue-400 text-blue-900","right-ring":"bg-purple-200 border-purple-400 text-purple-900","right-pinky":"bg-pink-200 border-pink-400 text-pink-900"},_e={"left-pinky":"Mindinho Esquerdo","left-ring":"Anelar Esquerdo","left-middle":"Médio Esquerdo","left-index":"Indicador Esquerdo",thumbs:"Polegares","right-index":"Indicador Direito","right-middle":"Médio Direito","right-ring":"Anelar Direito","right-pinky":"Mindinho Direito"},V={ACUTE:"́",TILDE:"̃",CIRC:"̂",GRAVE:"̀"};function Me(s){return s?/[çÇ]/.test(s)?"ç":s.normalize("NFD").replace(/[\u0300-\u036f]/g,""):""}function Ye(s){const t=s.normalize("NFD"),n=[];for(const i of t)/[\u0300-\u036f]/.test(i)&&n.push(i);return n}function Xe(s){return s===V.ACUTE?"´":s===V.TILDE||s===V.CIRC?"~":s===V.GRAVE?"´":null}function Ze(s){return s?!!(/[A-Za-zÁÉÍÓÚÀÃÕÂÊÔÇáéíóúàãõâêôç]/.test(s)&&s===s.toUpperCase()&&s!==s.toLowerCase()):!1}function Qe(s){if(!s)return new Set;const t=String(s);if(t===" ")return new Set([" "]);const n=new Set,i=Me(t).toLowerCase();i&&(L[i]||/[a-zç]/.test(i))?n.add(i):n.add(t.toLowerCase());const g=Ye(t);for(const x of g){const r=Xe(x);r&&n.add(r)}return Ze(t)&&n.add("Shift"),n}function es(s){if(!s)return null;const t=String(s),n=Me(t).toLowerCase();return L[n]?L[n]:t===" "?"thumbs":null}function ss({nextChar:s,isVisible:t=!0}){if(!t)return null;const n=Qe(s),i=es(s),g=l=>{const u=typeof l=="string"?l:"",b=L[u]||L[u.toLowerCase()]||null,v=n.has(u)||n.has(u.toLowerCase()),w="px-2 py-2 text-xs font-medium border-2 rounded transition-all duration-150 min-w-[32px] text-center select-none",k=b?fe[b]:"bg-base-200 border-base-300 text-base-content/60";return v?`${w} ${k} ring-4 ring-offset-2 ring-warning/60 animate-pulse scale-105 shadow-lg`:`${w} ${k}`},x=l=>l==="Backspace"?"w-20":l==="Tab"?"w-16":l==="CapsLock"||l==="Enter"?"w-20":l==="Shift"?"w-24":l===" "?"w-64":l==="Ctrl"||l==="Alt"||l==="AltGr"?"w-16":"w-8",r=l=>l===" "?"Space":l==="Backspace"?"⌫":l==="Tab"?"⇥":l==="CapsLock"?"Caps":l==="Enter"?"⏎":l==="Shift"?"⇧":String(l).toUpperCase();return e.jsx("div",{className:"card bg-base-100 shadow-lg",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(Ie,{className:"text-primary"}),e.jsx("span",{children:"Guia do Teclado"})]}),i&&e.jsxs("span",{className:`badge ${fe[i]} border font-semibold`,children:["Use: ",_e[i]]})]}),e.jsx("div",{className:"space-y-1",children:Je.map((l,u)=>e.jsx("div",{className:"flex justify-center gap-1",children:l.map((b,v)=>e.jsx("button",{className:`${g(b)} ${x(b)}`,disabled:!0,children:r(b)},`${u}-${v}`))},u))}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-base-300",children:[e.jsx("div",{className:"text-xs opacity-70 mb-2 text-center font-medium",children:"Legenda dos Dedos"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-pink-300 border border-pink-400"}),e.jsx("span",{children:"Mindinho"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-purple-300 border border-purple-400"}),e.jsx("span",{children:"Anelar"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-blue-300 border border-blue-400"}),e.jsx("span",{children:"Médio"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-300 border border-green-400"}),e.jsx("span",{children:"Indicador"})]})]}),e.jsx("div",{className:"space-y-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-gray-300 border border-gray-400"}),e.jsx("span",{children:"Polegar"})]})})]})]}),s&&e.jsx("div",{className:"mt-3 p-3 bg-warning/10 border border-warning/20 rounded-lg text-center",children:e.jsxs("div",{className:"text-sm font-medium",children:["Próxima tecla:"," ",e.jsx("span",{className:"text-lg font-bold mx-2 px-3 py-1 bg-warning/20 rounded",children:s===" "?"ESPAÇO":String(s).toUpperCase()})]})})]})})}function ke(s){return ye({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"},child:[]}]})(s)}function ts(s){return ye({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 388c-72.597 0-132-59.405-132-132 0-72.601 59.403-132 132-132 36.3 0 69.299 15.4 92.406 39.601L278 234h154V80l-51.698 51.702C348.406 99.798 304.406 80 256 80c-96.797 0-176 79.203-176 176s78.094 176 176 176c81.045 0 148.287-54.134 169.401-128H378.85c-18.745 49.561-67.138 84-122.85 84z"},child:[]}]})(s)}const N=[{id:1,title:"Iniciante",subtitle:"Palavras simples",mult:1,color:"#10b981",text:"O gato subiu no telhado."},{id:2,title:"Básico",subtitle:"Frases curtas",mult:2,color:"#06b6d4",text:"A casa azul fica na esquina da rua principal."},{id:3,title:"Intermediário",subtitle:"Texto introdutório",mult:3,color:"#8b5cf6",text:"O Brasil é um país tropical com belezas naturais e cultura rica."},{id:4,title:"Avançado",subtitle:"Mudanças no mundo digital",mult:4,color:"#f59e0b",text:"A tecnologia mudou como nos comunicamos e trabalhamos ao longo do século vinte e um."},{id:5,title:"Expert",subtitle:"Pesquisa e história",mult:5,color:"#ef4444",text:"No século passado, descobertas científicas impulsionaram avanços em várias áreas do conhecimento humano."},{id:6,title:"Mestre",subtitle:"Biodiversidade",mult:6,color:"#22c55e",text:"A biodiversidade do Brasil pede cuidado constante e estudo detalhado em biomas muito diferentes entre si."},{id:7,title:"Profissional",subtitle:"Globalização",mult:7,color:"#3b82f6",text:"A globalização acelerou a troca cultural e a integração da economia entre países, conectando mercados distantes."},{id:8,title:"Especialista",subtitle:"Neurobiologia",mult:8,color:"#ec4899",text:"A neurobiologia indica que o cérebro se adapta com treino: práticas regulares reforçam sinapses e melhoram a memória."},{id:9,title:"Virtuoso",subtitle:"Criptomoedas",mult:9,color:"#eab308",text:"Criptomoedas usam redes descentralizadas para registrar transações, reduzir intermediação e manter a segurança dos dados."},{id:10,title:"Lenda",subtitle:"IA generativa",mult:10,color:"#a855f7",text:"Modelos de IA generativa aprendem padrões nos dados e criam textos, imagens e sons originais, ajustando estilo e material conforme o contexto."}],Ce="typing_game_attempts_v1";function ne(){try{return JSON.parse(localStorage.getItem(Ce)||"{}")}catch{return{}}}function as(s){localStorage.setItem(Ce,JSON.stringify(s))}function rs(s){const t=ne(),n=s.phase;t[n]=[...t[n]||[],s].slice(-500),as(t)}function ns(){const s=ne();return Object.values(s).flat().sort((t,n)=>t.when-n.when)}function is(s){return(ne()[s]||[]).slice().sort((n,i)=>n.when-i.when)}function $(s,t="score"){return s!=null&&s.length?s.reduce((n,i)=>i[t]>n[t]?i:n,s[0]):null}function je(s){if(!(s!=null&&s.length))return{avgWpm:0,avgAcc:0,avgScore:0};const t=s.length,n=Math.round(s.reduce((x,r)=>x+r.wpm,0)/t),i=Math.round(s.reduce((x,r)=>x+r.accuracy,0)/t),g=Math.round(s.reduce((x,r)=>x+r.score,0)/t);return{avgWpm:n,avgAcc:i,avgScore:g}}function ls(s){const t=s.reduce((n,i)=>n+(i.timeMs||0),0);return{totalMs:t,totalMin:Math.round(t/6e4)}}function Ne(s){const t=Math.floor(s/1e3),n=Math.floor(t/60),i=t%60;return`${n}:${String(i).padStart(2,"0")}`}function os(s){return N.find(t=>t.id===s)}function cs(s){return s!=null&&s.length?Math.max(0,...s.map(t=>t.phase)):0}function ds(s){return Math.min(N.length,cs(s)+1)}function ms(s,t="score",n="all",i=10){return s.filter(r=>n==="all"?!0:r.phase===Number(n)).slice().sort((r,l)=>(l[t]??0)-(r[t]??0)).slice(0,i)}function xs(s){const t=s.replace("#",""),n=parseInt(t,16);return{r:n>>16&255,g:n>>8&255,b:n&255}}function ae(s){return Math.max(0,Math.min(255,s))}function ve(s,t){const{r:n,g:i,b:g}=xs(s),x=ae(n+t),r=ae(i+t),l=ae(g+t),u=b=>b.toString(16).padStart(2,"0");return`#${u(x)}${u(r)}${u(l)}`}function S(s){const t=ve(s,30),n=ve(s,-20);return`linear-gradient(135deg, ${t}, ${n})`}const us=s=>s===0?"bg-gradient-to-br from-amber-300/15 to-amber-600/15 border border-amber-400/40 shadow-lg":s===1?"bg-gradient-to-br from-slate-300/15 to-slate-600/15 border border-slate-400/40 shadow-lg":s===2?"bg-gradient-to-br from-orange-300/15 to-amber-600/15 border border-amber-500/40 shadow-lg":"bg-base-100 border border-base-300",hs=s=>s===0?"bg-gradient-to-br from-amber-200 to-amber-500 text-amber-950 ring-1 ring-amber-200/50 ring-offset-1 ring-offset-base-100":s===1?"bg-gradient-to-br from-slate-100 to-slate-400 text-slate-900 ring-1 ring-white/40 ring-offset-1 ring-offset-base-100":s===2?"bg-gradient-to-br from-amber-200 to-orange-600 text-amber-950 ring-1 ring-amber-300/50 ring-offset-1 ring-offset-base-100":"bg-base-300 text-base-content";function Ts(){const s=Be(a=>{var m;return(m=a.user)==null?void 0:m.data}),t=(s==null?void 0:s.nome)||"Usuário",[n,i]=h.useState("Jogar"),[g,x]=h.useState(!0),[r,l]=h.useState(null),[u,b]=h.useState(!1),[v,w]=h.useState(null),[k,o]=h.useState(null),[d,f]=h.useState(0),[C,D]=h.useState(""),[I,B]=h.useState(0),[q,R]=h.useState(!1),[Pe,U]=h.useState(!1),c=r?os(r):null,P=(c==null?void 0:c.text)||"",W=P.length,K=v?k?k-v:Date.now()-v:0,Se=K/6e4||1e-4,H=C.length,ie=H+I,F=ie>0?Math.round(H/ie*100):100,A=Math.max(0,Math.round(H/5/Se)),le=W?Math.round(d/W*100):0,J=Math.round(A*(F/100)*((c==null?void 0:c.mult)||1)),_=h.useRef(null),oe=N[N.length-1].id,Fe=r===oe,M=h.useMemo(()=>ns(),[q,r,n]),ce=h.useMemo(()=>ds(M),[M]),Ae=h.useMemo(()=>{const{avgWpm:a,avgAcc:m,avgScore:p}=je(M),{totalMin:j,totalMs:y}=ls(M);return{avgWpm:a,avgAcc:m,avgScore:p,totalMin:j,totalMs:y,count:M.length}},[M]),de=()=>{w(null),o(null),f(0),D(""),B(0),R(!1)},me=a=>{a>ce||(l(a),b(!0),de())},Te=()=>{b(!1),setTimeout(()=>{var a;return(a=_.current)==null?void 0:a.focus()},0)},$e=()=>{var m;const a={id:((m=crypto==null?void 0:crypto.randomUUID)==null?void 0:m.call(crypto))||`${Date.now()}`,player:t,phase:r,wpm:A,accuracy:F,score:J,errors:I,timeMs:K,when:Date.now()};rs(a)},Ee=a=>{if(!c)return;if((a.ctrlKey||a.metaKey)&&(a.key.toLowerCase()==="v"||a.key.toLowerCase()==="x"||a.key.toLowerCase()==="z")){a.preventDefault();return}v||w(Date.now());const m=P[d];if(a.key==="Backspace"||a.key==="Delete"){a.preventDefault();return}if(a.key.length===1&&(a.preventDefault(),!(d>=P.length)))if(a.key===m){const p=C+a.key,j=d+1;D(p),f(j),j>=P.length&&(o(Date.now()),R(!0),$e())}else B(p=>p+1)},Y=()=>{l(null),b(!1),de()},T=({icon:a,label:m,value:p})=>e.jsx("div",{className:"card bg-base-100",children:e.jsxs("div",{className:"card-body py-3 px-4",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs opacity-70",children:[a," ",m]}),e.jsx("div",{className:"text-2xl font-semibold text-center",children:p})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"flex text-3xl font-bold text-base-content",children:["DigitaPro",e.jsx(Ue,{tela:{nome:"DigitaPro",url:"devs/digitacao"}})]}),e.jsx("div",{className:"join",children:["Jogar","Ranking","Estatísticas"].map(a=>e.jsxs("button",{className:`btn join-item ${n===a?"btn-primary":"btn-ghost"}`,onClick:()=>i(a),children:[a==="Jogar"&&e.jsx(xe,{}),a==="Ranking"&&e.jsx(E,{}),a==="Estatísticas"&&e.jsx(Re,{}),a]},a))})]}),n==="Jogar"&&e.jsxs(e.Fragment,{children:[r===null&&e.jsx("div",{className:"card bg-base-200 shadow-lg",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"card-title text-2xl ml-0.5",children:"Escolha sua Fase"}),e.jsxs("button",{className:"btn btn-ghost btn-sm",onClick:()=>U(!0),children:[e.jsx(ue,{className:"mr-1"})," Como funcionam os pontos?"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 mt-2",children:N.map(a=>{const m=is(a.id),p=$(m,"score"),j=je(m),y=a.id>ce,Le=m.length===0;return e.jsxs("div",{className:`relative group card bg-base-100 shadow transition-[bottom] duration-400 bottom-0
                          ${y?"opacity-60 cursor-not-allowed":"hover:shadow-xl hover:bottom-1 cursor-pointer"}`,onClick:()=>me(a.id),title:y?`Complete a Fase ${a.id-1} para desbloquear`:"",children:[!y&&e.jsx("div",{className:"absolute -top-28 left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition pointer-events-none",children:e.jsxs("div",{className:"w-64 p-3 rounded-xl border border-base-300 bg-base-100 shadow",children:[e.jsxs("div",{className:"text-sm font-semibold text-center",children:[e.jsxs("div",{className:"mb-1",children:["Fase ",a.id]}),e.jsxs("div",{className:"flex justify-center items-center gap-1 opacity-60",children:[e.jsx(ts,{})," ",m.length," tentativa(s)"]}),e.jsx("hr",{className:"opacity-60 my-2.5"})]}),p?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between bg-warning/10 px-2 py-1 rounded",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(he,{})," Melhor"]}),e.jsxs("span",{className:"badge badge-warning",children:[p.score," pts"]})]}),e.jsxs("div",{className:"mt-2 text-sm grid grid-cols-2 px-2",children:[e.jsxs("div",{className:"flex items-center gap-1 opacity-80",children:[e.jsx(ge,{})," ",j.avgWpm," PPM"]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-80",children:[e.jsx(O,{})," ",j.avgAcc,"%"]})]})]}):e.jsx("div",{className:"opacity-60 text-sm text-center",children:"Sem histórico"})]})}),e.jsxs("div",{className:"card-body items-center text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white",style:{backgroundImage:S(a.color)},children:y?e.jsx(Ke,{}):e.jsx(Ve,{})}),e.jsx("h3",{className:"font-semibold text-lg",children:a.title}),e.jsx("div",{className:"opacity-70 text-sm",children:a.subtitle}),e.jsxs("div",{className:"mt-2 text-xs opacity-70",children:["Melhor: ",p?`${p.score} pts`:"--"]}),e.jsx("button",{className:`btn btn-sm mt-2 border-0 ${y?"btn-ghost":"text-white"}`,style:y?{}:{backgroundImage:S(a.color)},onClick:De=>{De.stopPropagation(),me(a.id)},disabled:y,children:y?"Bloqueada":Le?"Jogar":"Repetir"})]})]},a.id)})})]})}),r!==null&&u&&e.jsx("div",{className:"card bg-base-200 shadow-lg py-12",children:e.jsxs("div",{className:"card-body items-center",children:[e.jsx("div",{className:"badge my-3 text-white rounded-full w-20 h-20",style:{backgroundImage:S((c==null?void 0:c.color)||"#376fbe")},children:e.jsx(ze,{className:"text-4xl"})}),e.jsxs("div",{className:"text-2xl font-bold",children:["Pronto para a Fase ",r,"?"]}),e.jsx("div",{className:"opacity-70 mb-1",children:"Clique no botão abaixo para começar a digitar"}),e.jsxs("div",{className:"mt-6 flex gap-3 border-0",children:[e.jsxs("button",{className:"btn",onClick:Y,children:[e.jsx(X,{})," Voltar às Fases"]}),e.jsxs("button",{className:"btn text-white border-0",style:{backgroundImage:S((c==null?void 0:c.color)||"#376fbe")},onClick:Te,children:[e.jsx(xe,{})," Começar"]})]})]})}),r!==null&&!u&&!q&&e.jsx("div",{className:"card bg-base-200 shadow-lg",children:e.jsxs("div",{className:"card-body space-y-4",children:[e.jsxs("div",{className:"flex items-center flex-wrap gap-2 justify-between",children:[e.jsxs("div",{className:"flex gap-3 w-1/3",children:[e.jsxs("div",{className:"flex flex-col justify-around",children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs("button",{className:"btn btn-neutral btn-sm w-full",onClick:Y,children:[e.jsx(X,{})," Voltar às Fases"]})}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("button",{className:"btn btn-neutral btn-sm w-full",onClick:()=>x(a=>!a),children:g?"Ocultar Teclado":"Exibir Teclado"})})]}),e.jsx(T,{icon:e.jsx(we,{}),label:"Tempo",value:Ne(K)})]}),e.jsxs("div",{className:"badge text-white text-2xl ml-0.5 p-4",style:{backgroundImage:S((c==null?void 0:c.color)||"#376fbe")},children:["Fase ",r]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 !w-1/3 md:w-auto",children:[e.jsx(T,{icon:e.jsx(ge,{}),label:"PPM",value:A}),e.jsx(T,{icon:e.jsx(O,{}),label:"Precisão",value:`${F}%`}),e.jsx(T,{icon:e.jsx(he,{}),label:"Pontos",value:J}),e.jsx(T,{icon:e.jsx(Ge,{}),label:"Erros",value:I})]})]}),e.jsxs("div",{className:"rounded-2xl bg-base-100 border border-base-300 p-4",children:[e.jsx("progress",{className:"progress progress-primary w-full",value:le,max:"100"}),e.jsxs("div",{className:"text-xs opacity-70 mt-1 flex justify-between",children:[e.jsxs("span",{children:[d," / ",W," caracteres"]}),e.jsxs("span",{children:[le,"% completo"]})]}),e.jsx("div",{className:"mt-4 rounded-xl bg-base-200/50 p-4 font-mono text-lg leading-7",children:P.split("").map((a,m)=>{const p=C[m];let j="opacity-70";return p==null?j=m===d?"bg-primary/20 rounded":"opacity-60":j=p===a?"text-success":"text-error bg-error/10 rounded",e.jsx("span",{className:j,children:a},m)})}),e.jsx("div",{className:"mt-4",children:e.jsx("input",{ref:_,className:"input input-lg input-bordered w-full",placeholder:"Digite aqui...",value:C,readOnly:!0,onKeyDown:Ee,onPaste:a=>a.preventDefault()})}),e.jsx(ss,{nextChar:P[d],isVisible:g})]})]})}),r!==null&&q&&e.jsx("div",{className:"card bg-base-100 shadow-xl py-4",style:{backgroundImage:S((c==null?void 0:c.color)||"#376fbe")},children:e.jsxs("div",{className:"card-body items-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-base-200 text-success-content flex items-center justify-center mb-3",children:e.jsx(E,{className:"text-4xl"})}),e.jsxs("h2",{className:"text-3xl text-white font-extrabold",children:["Fase ",r," Concluída!"]}),e.jsx("div",{className:"mt-4 p-4 rounded-xl bg-base-200 border border-base-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm opacity-70",children:"Pontuação Final"}),e.jsxs("div",{className:"text-4xl font-extrabold text-primary",children:[J," pontos"]}),e.jsxs("div",{className:"opacity-70 mt-1 text-sm",children:["(",A," PPM × ",F,"% × ",c==null?void 0:c.mult,")"]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-4 w-full max-w-3xl",children:[e.jsx(z,{label:"PPM",value:A}),e.jsx(z,{label:"Precisão",value:`${F}%`}),e.jsx(z,{label:"Tempo",value:Ne(K)}),e.jsx(z,{label:"Erros",value:I})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsxs("button",{className:"btn",onClick:Y,children:[e.jsx(X,{})," Voltar às Fases"]}),e.jsx("button",{className:"btn",onClick:()=>{R(!1),D(""),f(0),B(0),w(Date.now()),o(null),setTimeout(()=>{var a;return(a=_.current)==null?void 0:a.focus()},0)},children:"Repetir Fase"}),!Fe&&e.jsxs("button",{className:"btn btn-primary text-white border-0",onClick:()=>{const a=Math.min(oe,r+1);l(a),b(!0),R(!1),D(""),f(0),B(0),w(null),o(null)},children:["Próxima Fase ",e.jsx(Oe,{})]})]})]})}),Pe&&e.jsxs("div",{className:"modal modal-open",children:[e.jsxs("div",{className:"modal-box w-11/12 max-w-4xl",children:[e.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx(ue,{})," Como Funcionam os Pontos"]}),e.jsxs("div",{className:"mt-3 space-y-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-base-100 border border-base-300",children:[e.jsx("div",{className:"font-semibold mb-1",children:"Fórmula de Pontuação"}),e.jsx("div",{className:"text-2xl font-extrabold",children:"Pontos = PPM × Precisão% × Número da Fase"}),e.jsxs("div",{className:"opacity-80 mt-1",children:["Ex.: 50 PPM × 100% × Fase 3 = ",e.jsx("b",{children:"150 pontos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-xl bg-success/10 border border-success/20",children:[e.jsx("div",{className:"font-semibold",children:"Velocidade (PPM)"}),e.jsx("div",{className:"opacity-80 text-sm",children:"Quanto mais rápido você digita, mais pontos ganha."})]}),e.jsxs("div",{className:"p-3 rounded-xl bg-info/10 border border-info/20",children:[e.jsx("div",{className:"font-semibold",children:"Precisão (%)"}),e.jsx("div",{className:"opacity-80 text-sm",children:"Erros reduzem os pontos. Mantenha a precisão alta."})]})]}),e.jsxs("div",{className:"p-3 rounded-xl bg-warning/10 border border-warning/20",children:[e.jsx("div",{className:"font-semibold mb-1",children:"Multiplicadores por Fase"}),e.jsx("div",{className:"flex flex-wrap gap-2 text-sm",children:N.map(a=>e.jsx("span",{className:"badge",children:`Fase ${a.id}: x${a.mult}`},a.id))}),e.jsx("div",{className:"opacity-80 mt-2 text-sm",children:"Fases mais difíceis = mais pontos."})]})]}),e.jsx("div",{className:"modal-action",children:e.jsx("button",{className:"btn",onClick:()=>U(!1),children:"Fechar"})})]}),e.jsx("div",{className:"modal-backdrop",onClick:()=>U(!1)})]})]}),n==="Ranking"&&e.jsx(gs,{attempts:M}),n==="Estatísticas"&&e.jsx(bs,{attempts:M,overall:Ae})]})}function z({label:s,value:t}){return e.jsxs("div",{className:"p-4 rounded-xl bg-base-200 text-center w-40",children:[e.jsx("div",{className:"text-xs opacity-70",children:s}),e.jsx("div",{className:"text-xl font-bold",children:t})]})}function gs({attempts:s}){const[t,n]=h.useState("Pontuação"),[i,g]=h.useState("all"),x=h.useMemo(()=>ms(s,t==="Pontuação"?"score":t==="Velocidade"?"wpm":"accuracy",i,10),[s,t,i]);return e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"card bg-base-200 shadow-lg",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"card-title text-2xl ml-0.5",children:"Ranking dos Melhores"}),e.jsx("div",{className:"flex gap-2 items-center",children:e.jsxs("select",{className:"select select-bordered select-sm",value:i,onChange:r=>g(r.target.value),children:[e.jsx("option",{value:"all",children:"Todas as Fases"}),N.map(r=>e.jsxs("option",{value:r.id,children:["Fase ",r.id]},r.id))]})})]}),e.jsx("div",{className:"tabs tabs-boxed mt-3",children:["Pontuação","Velocidade","Precisão"].map(r=>e.jsxs("a",{className:`tab w-1/3 gap-2 ${t===r?"tab-active text-primary font-bold":""}`,onClick:()=>n(r),children:[r==="Pontuação"&&e.jsx(E,{className:"text-md"}),r==="Velocidade"&&e.jsx(ke,{className:"text-xl"}),r==="Precisão"&&e.jsx(O,{className:"text-lg"}),r]},r))}),e.jsx("div",{className:"mt-4 space-y-3",children:x.length?x.map((r,l)=>e.jsx("div",{className:`card ${us(l)}`,children:e.jsx("div",{className:"card-body py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold ${hs(l)}`,children:l+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:r.player}),e.jsxs("div",{className:"text-xs opacity-70",children:["Fase ",r.phase," •"," ",new Date(r.when).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-extrabold",children:[t==="Pontuação"&&`${r.score} pts`,t==="Velocidade"&&`${r.wpm} PPM`,t==="Precisão"&&`${r.accuracy}%`]}),e.jsxs("div",{className:"opacity-70 text-xs",children:[r.wpm," PPM • ",r.accuracy,"%"]})]})]})})},r.id)):e.jsx("div",{className:"opacity-70",children:"Sem dados ainda — jogue algumas fases! 🎯"})})]})})})}function bs({attempts:s,overall:t}){const n=N.map(o=>{const d=$(s.filter(f=>f.phase===o.id),"wpm");return{name:`Fase ${o.id}`,value:d?d.wpm:0}}),i=N.map(o=>{const d=$(s.filter(f=>f.phase===o.id),"accuracy");return{name:`Fase ${o.id}`,value:d?d.accuracy:0}}),g=N.reduce((o,d)=>{const f=$(s.filter(C=>C.phase===d.id),"score");return o+(f?f.score:0)},0),x=s.length?Math.max(...s.map(o=>o.wpm||0)):0,r=s.length?Math.max(...s.map(o=>o.accuracy||0)):0,l=s.length?Math.max(...s.map(o=>o.score||0)):0,u=t.totalMs||0,b=t.totalMin>=1?`${t.totalMin} min`:`${Math.round(u/1e3)}s`,v=s.length?`${Math.round(u/s.length/1e3)}s`:"0s",w=s.reduce((o,d)=>o+(d.score||0),0),k=u>0?Math.round(w/(u/6e4)):0;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 md:grid-cols-2 gap-3",children:[e.jsx(G,{title:"PPM Médio",value:t.avgWpm,icon:e.jsx(ke,{}),color:"primary"}),e.jsx(G,{title:"Precisão Média",value:`${t.avgAcc}%`,icon:e.jsx(O,{}),color:"success"}),e.jsx(G,{title:"Total de Jogos",value:t.count,icon:e.jsx(qe,{}),color:"secondary"}),e.jsx(G,{title:"Pontuação Total",value:g,icon:e.jsx(E,{}),color:"accent"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(re,{title:"Melhor Velocidade (PPM)",children:e.jsx(Z,{width:"100%",height:260,className:"-ml-6 mt-2",children:e.jsxs(be,{data:n,children:[e.jsx(ee,{strokeDasharray:"3 3",opacity:.2}),e.jsx(se,{dataKey:"name"}),e.jsx(te,{}),e.jsx(Q,{}),e.jsx(pe,{type:"monotone",dataKey:"value",stroke:"var(--color-primary)",isAnimationActive:!1})]})})}),e.jsx(re,{title:"Melhor Precisão (%)",children:e.jsx(Z,{width:"100%",height:260,className:"-ml-6 mt-2",children:e.jsxs(be,{data:i,children:[e.jsx(ee,{strokeDasharray:"3 3",opacity:.2}),e.jsx(se,{dataKey:"name"}),e.jsx(te,{domain:[0,100]}),e.jsx(Q,{}),e.jsx(pe,{type:"monotone",dataKey:"value",stroke:"var(--color-success)",isAnimationActive:!1})]})})})]}),e.jsx(re,{title:"Melhor Pontuação",children:e.jsx(Z,{width:"100%",height:280,className:"-ml-6 mt-2",children:e.jsxs(We,{data:N.map(o=>{const d=$(s.filter(f=>f.phase===o.id),"score");return{name:`Fase ${o.id}`,value:d?d.score:0}}),children:[e.jsx(ee,{strokeDasharray:"3 3",opacity:.2}),e.jsx(se,{dataKey:"name"}),e.jsx(te,{}),e.jsx(Q,{}),e.jsx(He,{dataKey:"value",fill:"var(--color-primary)",radius:[8,8,0,0],isAnimationActive:!1})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{className:"rounded-lg bg-warning/10",children:[e.jsx("div",{className:"flex flex-col space-y-1.5 p-6",children:e.jsxs("h3",{className:"text-2xl font-semibold leading-none tracking-tight flex items-center space-x-2 text-warning",children:[e.jsx(E,{className:"w-5 h-5"}),e.jsx("span",{children:"Seus Recordes"})]})}),e.jsxs("div",{className:"p-6 pt-0 space-y-3 text-base-content/80",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Maior Velocidade:"}),e.jsxs("span",{className:"text-xl font-bold",children:[x," PPM"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Melhor Precisão:"}),e.jsxs("span",{className:"text-xl font-bold",children:[r,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Melhor Pontuação:"}),e.jsx("span",{className:"text-xl font-bold",children:l})]})]})]}),e.jsxs("div",{className:"rounded-lg bg-neutral/10",children:[e.jsx("div",{className:"flex flex-col space-y-1.5 p-6",children:e.jsxs("h3",{className:"text-2xl font-semibold leading-none tracking-tight flex items-center space-x-2 text-base-content",children:[e.jsx(we,{className:"w-5 h-5"}),e.jsx("span",{children:"Tempo de Prática"})]})}),e.jsxs("div",{className:"p-6 pt-0 space-y-3 text-base-content/80",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Tempo Total:"}),e.jsx("span",{className:"text-xl font-bold",children:b})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:" font-medium",children:"Tempo Médio:"}),e.jsx("span",{className:"text-xl font-bold ",children:v})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Pontos por Minuto:"}),e.jsx("span",{className:"text-xl font-bold",children:k})]})]})]})]})]})}function G({title:s,value:t,icon:n,color:i}){return e.jsx("div",{className:`card bg-${i}/10 text-${i}`,children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:s}),e.jsx("div",{className:"text-2xl font-bold text-base-content",children:t})]}),e.jsx("div",{className:"text-4xl",children:n})]})})})}function re({title:s,children:t}){return e.jsx("div",{className:"card bg-base-200",children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"card-title",children:s}),t]})})}export{Ts as default};
